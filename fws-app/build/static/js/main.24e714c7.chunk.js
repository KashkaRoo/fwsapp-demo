(this["webpackJsonpfws-app"]=this["webpackJsonpfws-app"]||[]).push([[0],{253:function(e,t,a){},315:function(e,t,a){e.exports=a(371)},371:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),i=a.n(r),c=a(24),s=a(29),o=a(30),m=a(32),u=a(31),d=(a(253),a(393)),p=a(69),h=a(254),E=a(202),f=a.n(E),g=a(255),b=a(397),S=a(402),v=a(399),C=a(398),y=a(412),O=a(400),N=a(401),_=a(48),F=a.n(_),D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={helpOpen:!1},e.handleHelpOpen=function(){e.setState({helpOpen:!0})},e.handleHelpClose=function(){e.setState({helpOpen:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(d.a,{postiion:"static",style:"Xylarium"===this.props.database?{backgroundImage:"url(./wood.jpg)"}:{backgroundImage:"url(./snake.jpg)"}},l.a.createElement(h.a,null,l.a.createElement(p.a,{color:"inherit",style:{flex:1}},"FWSFDB Application"),l.a.createElement(g.a,{color:"default",disableElevation:!0,variant:"outlined",startIcon:l.a.createElement(f.a,null),style:{float:"right",backgroundColor:"#FFFFFF"},onClick:this.handleHelpOpen},"Help"))),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"md",open:this.state.helpOpen,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Help"),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"search_a_database"},l.a.createElement("b",null,"Search a database"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the database you would like to search",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/database.PNG",alt:"Database dropdown menu"})),l.a.createElement("p",null,"2. Select the field to search by",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/field.PNG",alt:"Field dropdown menu"})),l.a.createElement("p",null,"3. Enter a search term",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/search_box.PNG",alt:"Search text box"})),l.a.createElement("p",null,"(",l.a.createElement("b",null,"Note:")," If no search term entered, the entire database will be returned!)"),l.a.createElement("p",null,"4. Select the ",l.a.createElement("b",null,"SEARCH")," button or press ",l.a.createElement("b",null,"Enter")," on your keyboard",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/search.PNG",alt:"Search button"}))))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"add_a_specimen"},l.a.createElement("b",null,"Add a Specimen"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the database you would like to add a specimen to",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/database.PNG",alt:"Database dropdown menu"})),l.a.createElement("p",null,"2. Select the button labeled ",l.a.createElement("b",null,"NEW"),l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/new.PNG",alt:"New specimen button"})),l.a.createElement("p",null,"3. (Optional) Search for or select an existing genus/species",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/gs_search.PNG",alt:"Genus and species search field"})),l.a.createElement("p",null,"4. Enter specimen data into the form",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/add_new.PNG",alt:"Add new specimen form"})),l.a.createElement("p",null,"5. Select ",l.a.createElement("b",null,"CONFIRM")," after reviewing the specimen details",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/add_new2.PNG",alt:"Add new specimen form confirmation window"}))))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"bulk_upload"},l.a.createElement("b",null,"Add Multiple Specimen"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the database you would like to add specimen to",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/database.PNG",alt:"Database dropdown menu"})),l.a.createElement("p",null,"2. Select the ",l.a.createElement("b",null,"BULK ADD")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/bulk_add.PNG",alt:"Bulk Add button"})),l.a.createElement("p",null,"3. Select the ",l.a.createElement("b",null,"Browse...")," button to open a file explorer",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/browse.PNG",alt:"Browse button"})),l.a.createElement("p",null,"4. Navigate to, and select the ",l.a.createElement("b",null,".csv")," file containing the specimen data"),l.a.createElement("p",null,"5. Select the ",l.a.createElement("b",null,"SAVE")," button")))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"view_specimen"},l.a.createElement("b",null,"View a Specimen"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. After searching the database, select the record to view"),l.a.createElement("p",null,"2. The specimen's information will be displayed in form view",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/view_edit.PNG",alt:"View/Edit form"}))))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"edit_specimen"},l.a.createElement("b",null,"Edit a Specimen"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. After searching the database, select the record to edit"),l.a.createElement("p",null,"2. The specimen's information will be displayed in form view",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/view_edit.PNG",alt:"View/Edit form"})),l.a.createElement("p",null,"3. Make necessary changes to the specimen data"),l.a.createElement("p",null,"4. Select the ",l.a.createElement("b",null,"CONFIRM SAVE")," button to save the changes",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/view_edit2.PNG",alt:"View/Edit form confirmation window"}))))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"update_scientific_name"},l.a.createElement("b",null,"View Taxonomic Synonyms"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"TAXONOMIC SYNONYMS")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/tax_syn.PNG",alt:"Taxonomic Synonyms button"})),l.a.createElement("p",null,"2. Select the field to search by",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/tax_syn4.PNG",alt:"Taxonomic Synonym search field"})),l.a.createElement("p",null,"3. Enter a search term",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/search_box.PNG",alt:"Search text box"})),l.a.createElement("p",null,"4. Select the ",l.a.createElement("b",null,"SEARCH")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/search.PNG",alt:"Search button"}))))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"filter_search_results"},l.a.createElement("b",null,"Filter Search Results"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"Filter Table")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/filter.PNG",alt:"Filter icon"})),l.a.createElement("p",null,"2. Select a field to filter by to display a list of options",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/filter_results.PNG",alt:"Filter table options pane"})),l.a.createElement("p",null,"3. Select an option from the dropdown list"),l.a.createElement("p",null,"4. Click outside the ",l.a.createElement("b",null,"Filter Table")," window to return to filtered results")))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"select_columns"},l.a.createElement("b",null,"Select Fields to Display"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"View Columns")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/columns.PNG",alt:"View Columns icon"})),l.a.createElement("p",null,"2. Select the checkboxes for the fields to display in the table",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/show_columns.PNG",alt:"List of selectable columns"})),l.a.createElement("p",null,"3. Select an option from the dropdown list"),l.a.createElement("p",null,"4. Click outside the ",l.a.createElement("b",null,"View Columns")," window to return to results")))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"print"},l.a.createElement("b",null,"Print Search Results"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"Print")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/print.PNG",alt:"Print icon"})),l.a.createElement("p",null,"2. Follow your system's dialogs to select preferred print settings"),l.a.createElement("p",null,"3. Select ",l.a.createElement("b",null,"Print")," within your system's print dialog")))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"download_csv"},l.a.createElement("b",null,"Download Search Results (.csv)"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"Download CSV")," button to open a file explorer",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/download.PNG",alt:"Download icon"})),l.a.createElement("p",null,"2. Within the file explorer, select the save location and name"),l.a.createElement("p",null,"3. Select ",l.a.createElement("b",null,"Save")," to save the file")))),l.a.createElement(y.a,null,l.a.createElement(O.a,{expandIcon:l.a.createElement(F.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(p.a,{className:"sub_search"},l.a.createElement("b",null,"Search Within Results"))),l.a.createElement(N.a,null,l.a.createElement(p.a,null,l.a.createElement("p",null,"1. Select the ",l.a.createElement("b",null,"Search")," button",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/sub_search1.PNG",alt:"Search icon"})),l.a.createElement("p",null,"2. Enter the search term(s) into the search field that appears",l.a.createElement("br",null),l.a.createElement("img",{src:"./Help/sub_search2.PNG",alt:"Search text field"})),l.a.createElement("p",null,"3. The results in the table will be automatically updated"))))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleHelpClose,color:"primary"},"Close"))))}}]),a}(l.a.Component),w=a(16),k=a.n(w),L=a(33),I=a(256),j=a(116),P=a.n(j),A=a(403),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={searchTerm:"",field:"Binomial_Nomenclature",database:"Herpetology",fields:[],databases:[{value:"Herpetology",label:"Herpetology"},{value:"Xylarium",label:"Xylarium"},{value:"Criminalistics",label:"Criminalistics"}]},e.handleChange=function(t,a){return e.setState(Object(c.a)({},t,a))},e.apiCall("herpetology"),e}return Object(o.a)(a,[{key:"apiCall",value:function(){var e=Object(L.a)(k.a.mark((function e(t){var a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://192.168.1.18:9000/",e.next=3,fetch(a+t+"/getFields").then((function(e){return e.json()})).then((function(e){e.recordsets?(n.handleChange("fields",e.recordsets[0]),n.props.setAppFields(e.recordsets[0])):(n.handleChange("fields",e[0]),n.props.setAppFields(e[0]))})).catch((function(e){alert("Something happened in fetch "+a+t+"/getFields : "+e)}));case 3:return e.next=5,fetch(a+"xylarium/lastWD").then((function(e){return e.json()})).then((function(e){void 0!==e.recordsets[0][0]?n.props.getLastWD(e.recordsets[0][0].WD_Num):n.props.getLastWD("No Previous Specimen - Check DB Connection")})).catch((function(e){alert("Something happened in fetch "+a+"xylarium/lastWD: "+e)}));case 5:return e.next=7,fetch(a+"herpetology/lastNFWFL_Num").then((function(e){return e.json()})).then((function(e){void 0!==e[0]?n.props.getLastNFWFL_Num(e[0][0].NFWFL_Num):n.props.getLastNFWFL_Num("No Previous Herpetology Specimen - Check DB Connection")})).catch((function(e){alert("Something happened in fetch "+a+"herpetology/lastNFWFL_Num: "+e)}));case 7:return e.next=9,fetch(a+"criminalistics/lastCrim").then((function(e){return e.json()})).then((function(e){void 0!==e.recordsets[0][0]?n.props.getLastCrim(e.recordsets[0][0].CRIM_Num):n.props.getLastCrim("No Previous Criminology Specimen - Check DB Connection")})).catch((function(e){alert("Something happened in fetch "+a+"criminalistics/lastCrim: "+e)}));case 9:return e.next=11,fetch(a+"organism/getFields").then((function(e){return e.json()})).then((function(e){n.props.setOrganismFields(e)})).catch((function(e){alert("Something happened in fetch "+a+"organism/getFields : "+e)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDBChange",value:function(){var e=Object(L.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.fields,this.handleChange("searchTerm",""),this.handleChange("field",a[0].COLUMN_NAME),this.handleChange("data",[]),this.handleChange("database",t.target.value),this.props.setAppDB(t.target.value),e.next=8,this.apiCall(t.target.value);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.database,n=t.databases,r=t.field,i=t.fields,c=t.searchTerm;return l.a.createElement("div",{className:"searchInside"},l.a.createElement(I.a,{id:"db",select:!0,size:"small",label:"Database",value:a,onChange:function(t){return e.handleDBChange(t)},SelectProps:{native:!0},style:{width:"440px",marginBottom:"15px",marginTop:"10px"},variant:"outlined"},n.map((function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))),l.a.createElement("br",null),l.a.createElement(I.a,{id:"field",select:!0,size:"small",label:"Field",value:r,onChange:function(t){return e.handleChange("field",t.target.value)},SelectProps:{native:!0},InputLabelProps:{shrink:!0},style:{marginBottom:"15px"},variant:"outlined"},i&&i.map((function(e){return"Location_ID"===e.COLUMN_NAME||"Locality_ID"===e.COLUMN_NAME||"Organism_ID"===e.COLUMN_NAME||"Specimen_ID"===e.COLUMN_NAME?"":l.a.createElement("option",{key:e.COLUMN_NAME,value:e.COLUMN_NAME},e.COLUMN_NAME)}))),l.a.createElement(I.a,{id:"searchTerm",label:"Search",size:"small",style:{marginBottom:"15px"},value:c,onChange:function(t){return e.handleChange("searchTerm",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.props.handleSearch(r,c)},variant:"outlined"}),l.a.createElement("br",null),l.a.createElement(g.a,{onClick:function(t){return e.props.handleSearch(r,c)},color:"primary",variant:"outlined",endIcon:l.a.createElement(P.a,null),style:{marginBottom:"15px"}},"Search",this.props.loading&&l.a.createElement(A.a,{size:24})))}}]),a}(l.a.Component),T=a(27),U=a(169),W=a.n(U),B=a(405),R=a(411),M=a(75),H=a(409),G=a(165),V=a(151),z=a(57),X=a.n(z),Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={selectedOrganism:{},editedOrganism:{},relatedHerp:[],relatedXy:[],relatedCrim:[],organismFieldList:[],organisms:[],mainDialogOpen:!1,confirmOpen:!1,unsavedOpen:!1,alert:!1,error:""},e.handleOpenMainDialog=function(){e.setState({mainDialogOpen:!0})},e.handleUnsavedClose=function(){e.setState({unsavedOpen:!1})},e.handleUnsavedOpen=function(){e.isEquivalent(e.state.selectedOrganism,e.state.editedOrganism)?e.handleCloseMainDialog(!0):e.setState({unsavedOpen:!0})},e.handleDiscard=function(){e.handleUnsavedClose();e.handleCloseMainDialog(!0)},e.handleCloseMainDialog=function(t){e.isEquivalent(e.state.selectedOrganism,e.state.editedOrganism)&&e.setState({mainDialogOpen:!1,selectedOrganism:{},editedOrganism:{}}),t&&e.setState({mainDialogOpen:!1,selectedOrganism:{},editedOrganism:{},alert:!1})},e.handleSelectedOrganism=function(t){e.setState({selectedOrganism:Object(T.a)({},t),editedOrganism:Object(T.a)({},t)})},e.handleEditOrganism=function(t,a){a&&e.setState({editedOrganism:Object(T.a)(Object(T.a)({},e.state.editedOrganism),{},Object(c.a)({},a,t.target.value))})},e.handleConfirmOpen=function(){e.isEquivalent(e.state.selectedOrganism,e.state.editedOrganism)?e.handleCloseMainDialog(!0):(e.findRelatedSpecimen(e.state.editedOrganism.Organism_ID),e.setState({confirmOpen:!0}))},e.handleConfirmClose=function(){e.setState({confirmOpen:!1})},e.handleUpdateOrganism=function(){var t=e.state.editedOrganism,a=t.Organism_ID,n=e.props.APIURL+"organism/update/"+a;fetch(n,{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(a){"EREQUEST"===a.code?e.setState({error:a.originalError.info.message,alert:!0}):(e.handleConfirmClose(),e.setState({selectedOrganism:t,alert:!0,error:""}))})).catch((function(e){alert("Something happened in fetch "+n+" : "+e)})),e.dialogContent.scrollIntoView({behavior:"smooth",block:"start"})},e.isEquivalent=function(e,t){var a=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);if(a.length!==n.length)return!1;for(var l=0;l<a.length;l++){var r=a[l];if(e[r]!==t[r])return!1}return!0},e}return Object(o.a)(a,[{key:"getOrganismList",value:function(){var e=Object(L.a)(k.a.mark((function e(t){var a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.APIURL+"organism/auto/"+t.target.value,!t.target.value){e.next=4;break}return e.next=4,fetch(a).then((function(e){return e.json()})).then((function(e){if(e.length>0){var t=Object.getOwnPropertyNames(e[0]);n.setState({organisms:e,organismFieldList:t})}})).catch((function(e){alert("Something happened in fetch "+a+" : "+e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findRelatedSpecimen",value:function(){var e=Object(L.a)(k.a.mark((function e(t){var a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.APIURL+"organism/related/"+t,e.next=3,fetch(a).then((function(e){return e.json()})).then((function(e){n.setState({relatedHerp:e[0],relatedXy:e[1],relatedCrim:e[2]})}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this;return this.state.error?(e=this.state.error,t="error"):(e="Success!",t="success"),l.a.createElement("div",null,l.a.createElement(g.a,{color:"primary",disableElevation:!0,variant:"outlined",endIcon:l.a.createElement(W.a,null),style:{marginBottom:"10px"},onClick:this.handleOpenMainDialog},"Update Scientific Name"),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"md",open:this.state.mainDialogOpen,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Update Scientific Name "),l.a.createElement(v.a,null,l.a.createElement("div",{ref:function(e){a.dialogContent=e}},l.a.createElement(v.a,null,l.a.createElement(V.a,{in:this.state.alert},l.a.createElement(H.a,{severity:t,action:l.a.createElement(G.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.closeAlert},l.a.createElement(X.a,{fontSize:"inherit"}))},e)),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Search:"),l.a.createElement(R.a,{disableClearable:!0,id:"combo-box-demo",options:this.state.organisms,getOptionLabel:function(e){if(null===e.Class&&null===e.Order&&null===e.Family&&null===e.Binomial_Nomenclature&&null===e.Common_Name)return"Unknown. Select for details.";var t="";return e.Class&&(t+=e.Class+" "),e.Subclass&&(t+=e.Subclass+" "),e.Order&&(t+=e.Order+" "),e.Suborder&&(t+=e.Suborder+" "),e.Binomial_Nomenclature&&(t+=e.Binomial_Nomenclature+" "),e.Family&&(t+=e.Family+" "),e.Subspecies&&(t+=e.Subspecies+" "),e.Common_Name&&(t+='"'+e.Common_Name+'"'),t},onChange:function(e,t){return a.handleSelectedOrganism(t)},fullWidth:!0,renderInput:function(e){return l.a.createElement(I.a,Object.assign({},e,{label:"Search by Class, Order, Family, Binomial Nomenclature",variant:"outlined",fullWidth:!0,onChange:function(e){a.getOrganismList(e)}}))}})),Object.keys(this.state.selectedOrganism).map((function(e){return"CREATED_BY"===e||"CREATED_TS"===e||"MODIFIED_BY"===e||"MODIFIED_TS"===e||"Organism_ID"===e?"":l.a.createElement(I.a,{key:e,disabled:"Organism_ID"===e,id:e,label:e,value:a.state.editedOrganism[e]||"",fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onChange:function(t){return a.handleEditOrganism(t,e)}})}))))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleUnsavedOpen,color:"primary"},"Close"),l.a.createElement(g.a,{onClick:this.handleConfirmOpen,color:"primary"},"Save"))),l.a.createElement(b.a,{open:this.state.confirmOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Confirm your Changes"),l.a.createElement(v.a,null,"Changes in progess:",Object.keys(this.state.selectedOrganism).map((function(e){return a.state.selectedOrganism[e]!==a.state.editedOrganism[e]?l.a.createElement("div",null,l.a.createElement("li",null,"From ",l.a.createElement("b",null,e),": ",a.state.selectedOrganism[e]?a.state.selectedOrganism[e]:"[empty]"," ----",">"," ",l.a.createElement("b",null,e),": ",a.state.editedOrganism[e])):""})),"Your changes will affect the following specimen:",l.a.createElement(M.JsonToTable,{json:this.state.relatedHerp}),l.a.createElement("br",null),l.a.createElement(M.JsonToTable,{json:this.state.relatedXy}),l.a.createElement("br",null),l.a.createElement(M.JsonToTable,{json:this.state.relatedCrim})),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleConfirmClose,color:"primary",autoFocus:!0},"Continue Editing"),l.a.createElement(g.a,{onClick:this.handleUpdateOrganism,color:"primary"},"Confirm Save"))),l.a.createElement(b.a,{open:this.state.unsavedOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Navigating away from Unsaved Changes!"),l.a.createElement(v.a,null,l.a.createElement(B.a,{id:"alert-dialog-description"},"You are navigating away without saving these changes!",Object.keys(this.state.editedOrganism).map((function(e){return a.state.selectedOrganism[e]!==a.state.editedOrganism[e]?l.a.createElement("div",null,l.a.createElement("li",null,"From ",l.a.createElement("b",null,e),": ",a.state.selectedOrganism[e]," ----",">"," ",l.a.createElement("b",null,e),": ",a.state.editedOrganism[e])):""})))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleDiscard,color:"primary",autoFocus:!0},"Discard Changes"),l.a.createElement(g.a,{onClick:this.handleUnsavedClose,color:"primary"},"Continue Editing"))))}}]),a}(l.a.Component),J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={field:"Class",dialogOpen:!1,searchTerm:"",organisms:{}},e.handleChange=function(t,a){return e.setState(Object(c.a)({},t,a))},e.handleSearch=function(){var t,a=e.state,n=a.field,l=a.searchTerm;t=""===l?e.props.APIURL+"organism/history/":e.props.APIURL+"organism/history/"+n+"/"+l,fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({organisms:t})})).catch((function(e){alert("Something happened in fetch "+t+" : "+e)}))},e.closeAndClear=function(){e.setState({dialogOpen:!1,organisms:{},searchTerm:"",field:"Class"})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.field,n=t.searchTerm,r=t.organisms,i=this.props.organismFieldList;return l.a.createElement("div",null,l.a.createElement(g.a,{color:"primary",disableElevation:!0,variant:"outlined",endIcon:l.a.createElement(W.a,null),onClick:function(t){return e.handleChange("dialogOpen",!0)},style:{marginBottom:"10px"}},"Taxonomic Synonyms"),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"lg",open:this.state.dialogOpen,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Taxonomic Synonyms"),l.a.createElement(v.a,null,"History of 'Update Scientific Name' changes: ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{id:"field",select:!0,label:"Field",value:a,onChange:function(t){return e.handleChange("field",t.target.value)},SelectProps:{native:!0},InputLabelProps:{shrink:!0},variant:"outlined",size:"small"},i&&i.map((function(e){return"CREATED_BY"===e.COLUMN_NAME||"CREATED_TS"===e.COLUMN_NAME||"MODIFIED_BY"===e.COLUMN_NAME||"MODIFIED_TS"===e.COLUMN_NAME||"Organism_ID"===e.COLUMN_NAME?"":l.a.createElement("option",{key:e.COLUMN_NAME,value:e.COLUMN_NAME},e.COLUMN_NAME)}))),l.a.createElement(I.a,{id:"searchTerm",label:"Search",value:n,onChange:function(t){return e.handleChange("searchTerm",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.handleSearch(t)},variant:"outlined",size:"small"}),l.a.createElement(g.a,{onClick:function(t){return e.handleSearch(t)},color:"primary",disableElevation:!0,variant:"outlined",endIcon:l.a.createElement(P.a,null)},"Search"),l.a.createElement("br",null),l.a.createElement(M.JsonToTable,{json:r})),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.closeAndClear,color:"primary"},"Close"))))}}]),a}(l.a.Component),q=a(288),Q=a.n(q),K=a(117),$=a.n(K),Z=a(172),ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={selectedSpecimen:{},editedSelectedSpecimen:{},open:!1,confirmOpen:!1,unsavedOpen:!1,deleteFileOpen:!1,delFile:"",deleteSpecimenOpen:!1,tableStatePersist:{searchText:"",filterList:[],columns:[]},alert:!1,error:"",files:[],specimenFiles:[]},e.handleUnsavedOpen=function(){e.isEquivalent(e.state.selectedSpecimen,e.state.editedSelectedSpecimen)?e.setState({open:!1,error:"",alert:!1,selectedSpecimen:{},editedSelectedSpecimen:{}}):e.setState({unsavedOpen:!0})},e.handleUnsavedClose=function(){e.setState({unsavedOpen:!1})},e.handleConfirmOpen=function(){e.setState({confirmOpen:!0,alert:!1,error:""})},e.handleConfirmClose=function(){e.setState({confirmOpen:!1})},e.handleClickOpen=function(t){e.getFiles(t),e.setState({open:!0})},e.handleEditsSave=function(){!e.isEquivalent(e.state.selectedSpecimen,e.state.editedSelectedSpecimen)||e.state.files?e.handleConfirmOpen():e.handleUnsavedOpen()},e.handleDiscard=function(){e.handleUnsavedClose();e.handleClose(!0)},e.handleClose=function(t){return e.isEquivalent(e.state.selectedSpecimen,e.state.editedSelectedSpecimen)?(e.setState({open:!1,error:"",alert:!1,selectedSpecimen:{},editedSelectedSpecimen:{},specimenFiles:[]}),void e.closeAlert()):t?(e.handleUnsavedClose(),e.setState({open:!1,error:"",alert:!1,selectedSpecimen:{},editedSelectedSpecimen:{},specimenFiles:[]}),void e.closeAlert()):void 0},e.handleOnChange=function(t,a){a&&(""===t.target.value?e.setState({editedSelectedSpecimen:Object(T.a)(Object(T.a)({},e.state.editedSelectedSpecimen),{},Object(c.a)({},a,null))}):e.setState({editedSelectedSpecimen:Object(T.a)(Object(T.a)({},e.state.editedSelectedSpecimen),{},Object(c.a)({},a,t.target.value))}))},e.handleUpdate=Object(L.a)(k.a.mark((function t(){var a,n,l,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.editedSelectedSpecimen,l=a.selectedSpecimen,r=a.files,i=e.props.APIURL+e.props.database+"/update",t.next=4,fetch(i,{method:"PUT",body:JSON.stringify(n),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"EREQUEST"===t.code?e.setState({error:t.originalError.info.message,alert:!0}):(r&&e.handleFileUpload(l.Specimen_ID),e.handleConfirmClose(),e.setState({alert:!0,error:"",selectedSpecimen:n,files:[]}))})).then((function(){e.getFiles(e.state.selectedSpecimen)})).then((function(){e.props.handleSearch(e.props.field,e.props.searchTerm)})).catch((function(e){alert("Something happened in fetch "+i+" : "+e)}));case 4:e.dialogContent.scrollIntoView({behavior:"smooth",block:"start"});case 5:case"end":return t.stop()}}),t)}))),e.closeAlert=function(){e.setState({alert:!1,error:""})},e.isEquivalent=function(e,t){var a=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);if(a.length!==n.length)return!1;for(var l=0;l<a.length;l++){var r=a[l];if(e[r]!==t[r])return!1}return!0},e.isOrganism=function(e){return"Class"===e||"Subclass"===e||"Order"===e||"Suborder"===e||"Family"===e||"Subfamily"===e||"Subgenus"===e||"Subspecies"===e||"Variety"===e||"Common_Name"===e||"Binomial_Nomenclature"===e||"Previous_Designation"===e},e.handleChange=function(t,a){"propsUpdate"!==t&&e.setState({tableStatePersist:{searchText:a.searchText,filterList:a.filterList,columns:a.columns}})},e.getSearchText=function(){return e.state.tableStatePersist.searchText},e.getColumns=function(){var t=e.props.fields,a=[];for(var n in t)if("Organism_ID"===t[n]||"Location_ID"===t[n]||"Locality_ID"===t[n]);else{var l={};l.name=t[n],l.options={},a.push(l)}var r=["NFWFL_Num","WD_Num","CRIM_Num","Material","Common_Name","Sample_Location","Binomial_Nomenclature"];for(var i in a)r.includes(a[i].name)||(a[i].options.display=!1);for(var c=0;c<a.length;c++)a[c].options.filterList=e.state.tableStatePersist.filterList[c],void 0!==e.state.tableStatePersist.columns[c]&&(e.state.tableStatePersist.columns[c].hasOwnProperty("display")&&(a[c].options.display=e.state.tableStatePersist.columns[c].display),e.state.tableStatePersist.columns[c].hasOwnProperty("sortDirection")&&"none"!==e.state.tableStatePersist.columns[c].sortDirection&&(a[c].options.sortDirection=e.state.tableStatePersist.columns[c].sortDirection));return a},e.closeAlert=function(){e.setState({alert:!1,error:void 0})},e.handleFileUpload=function(){var t=Object(L.a)(k.a.mark((function t(a){var n,l,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.state.files,console.log(n),l=new FormData,r=e.props.APIURL+"upload/"+e.props.database+"/"+a,console.log(r),console.log(n.length),i=0;i<n.length;i++)l.append("attachment",n[i]);return console.log(l),t.next=10,fetch(r,{method:"POST",body:l}).then((function(e){return e.json()})).then((function(e){console.log("handleFileUpload POST response: ",e)})).catch((function(e){console.error(e)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFiles=function(){var t=Object(L.a)(k.a.mark((function t(a){var n,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.Specimen_ID,l=e.props.APIURL+"getFiles/"+e.props.database+"/"+n,t.next=4,fetch(l).then((function(e){return e.json()})).then((function(t){console.log("getFiles fetch response: ",t),e.setState({specimenFiles:t})})).catch((function(e){alert(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.retrieveFile=function(){var t=Object(L.a)(k.a.mark((function t(a){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.selectedSpecimen.Specimen_ID,window.open(e.props.APIURL+"Docs/"+e.props.database+"/"+n+"/"+a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteFile=function(){var t=Object(L.a)(k.a.mark((function t(a){var n,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.selectedSpecimen.Specimen_ID,l=e.props.APIURL+"deleteFile/"+e.props.database+"/"+n+"/"+a,t.next=4,fetch(l).then((function(t){console.log(t),e.getFiles(e.state.selectedSpecimen),e.closeFileDelete()})).catch((function(e){alert(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openFileDelete=function(t){e.setState({deleteFileOpen:!0,delFile:t})},e.closeFileDelete=function(){e.setState({deleteFileOpen:!1,delFile:""})},e.deleteSpecimen=Object(L.a)(k.a.mark((function t(){var a,n,l,r,i,c,s,o;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s in a=e.state,n=a.specimenFiles,l=a.selectedSpecimen,r=e.props,i=r.database,c=r.APIURL,n)e.deleteFile(s);return o=c+i+"/delete/"+l.Specimen_ID,t.next=6,fetch(o).then((function(t){console.log(t),e.props.handleSearch(e.props.field,e.props.searchTerm),e.setState({selectedSpecimen:{},editedSelectedSpecimen:{},files:[],open:!1,alert:!1})})).catch((function(e){alert(e)}));case 6:e.closeSpecimenDelete();case 7:case"end":return t.stop()}}),t)}))),e.openSpecimenDelete=function(){e.setState({deleteSpecimenOpen:!0})},e.closeSpecimenDelete=function(){e.setState({deleteSpecimenOpen:!1})},e}return Object(o.a)(a,[{key:"handleFiles",value:function(e){this.setState({files:e})}},{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.error,i=n.specimenFiles,c=n.delFile;return r?(e=r,t="error"):(e="Success!",t="success"),l.a.createElement("div",null,l.a.createElement(Q.a,{title:"Results",data:this.props.data,columns:this.getColumns(),options:{selectableRows:"single",disableToolbarSelect:"true",onRowClick:function(e,t,n){a.setState({selectedSpecimen:a.props.data[t.dataIndex],editedSelectedSpecimen:a.props.data[t.dataIndex]}),a.getFiles(a.props.data[t.dataIndex]),a.handleClickOpen(a.props.data[t.dataIndex])},onRowsDelete:function(){return window.alert("Do we want to delete from table for printing? -- Not implemented at this time."),!1},searchText:this.state.tableStatePersist.searchText,onTableChange:function(e,t){return a.handleChange(e,t)}}}),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"md",open:this.state.open,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title",ref:this.titleRef},"View and Edit Specimen Details"),l.a.createElement(v.a,null,l.a.createElement("div",{ref:function(e){a.dialogContent=e}},l.a.createElement(v.a,null,l.a.createElement(V.a,{in:this.state.alert},l.a.createElement(H.a,{severity:t,action:l.a.createElement(G.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.closeAlert},l.a.createElement(X.a,{fontSize:"inherit"}))},e)),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("center",null,"Attachments:")),i.map((function(e){return l.a.createElement("div",{key:e},l.a.createElement(g.a,{key:e,onClick:function(t){return a.retrieveFile(e)},color:"primary"},e),l.a.createElement(G.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return a.openFileDelete(e)}},l.a.createElement($.a,null)))}))),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("center",null,"Updating these fields will only change this specimen. ",l.a.createElement("br",null),l.a.createElement("small",null," Use Update Scientific Designation to change many specimen at once."))),Object.keys(this.state.selectedSpecimen).map((function(e){return"Location_ID"===e||"Locality_ID"===e||"Organism_ID"===e?"":a.isOrganism(e)?l.a.createElement("div",{key:e},l.a.createElement(I.a,{key:e,id:e,label:e,defaultValue:a.state.selectedSpecimen[e],fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onBlur:function(t){return a.handleOnChange(t,e)}})):""}))),Object.keys(this.state.selectedSpecimen).map((function(e){return"Location_ID"===e||"Locality_ID"===e||"Organism_ID"===e||"Specimen_ID"===e||a.isOrganism(e)?"":l.a.createElement("div",{key:e},l.a.createElement(I.a,{key:e,disabled:"Specimen_ID"===e,id:e,label:e,defaultValue:a.state.selectedSpecimen[e],fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onBlur:function(t){return a.handleOnChange(t,e)}}))})),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("center",null,"Upload:")),l.a.createElement(Z.a,{onChange:this.handleFiles.bind(this)}))))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.openSpecimenDelete,color:"secondary"},"Delete Specimen"),l.a.createElement("div",{style:{flex:"1 0 0"}}),l.a.createElement(g.a,{onClick:this.handleUnsavedOpen,color:"primary"},"Close"),l.a.createElement(g.a,{onClick:this.handleEditsSave,color:"primary"},"Save"))),l.a.createElement(b.a,{open:this.state.confirmOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Confirm your Changes"),l.a.createElement(v.a,null,l.a.createElement("b",null,"Changes in progress: "),l.a.createElement("br",null),l.a.createElement("i",null,"Attachments:"),this.state.files.map((function(e){return console.log(e.name),l.a.createElement("div",{key:e.name},l.a.createElement("li",null,e.name))})),Object.keys(this.state.selectedSpecimen).map((function(e){return a.state.selectedSpecimen[e]!==a.state.editedSelectedSpecimen[e]?l.a.createElement("div",null,l.a.createElement("li",null,"From ",l.a.createElement("b",null,e),": ",a.state.selectedSpecimen[e]," ----",">"," ",l.a.createElement("b",null,e),": ",a.state.editedSelectedSpecimen[e])):""})),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("small",null,l.a.createElement("b",null,"A Note:"),l.a.createElement("br",null),"Updates made to the following fields: ",l.a.createElement("br",null)," ",l.a.createElement("br",null),"Binomial Nomenclature, Class, Subclass, Order, Suborder, Family, Subfamily, ",l.a.createElement("br",null)," Subgenus, Subspecies, Variety, Common Name, or Previous Designation",l.a.createElement("br",null),l.a.createElement("br",null),"Will ",l.a.createElement("b",null,"only")," affect/reflect in this specimen. ",l.a.createElement("br",null),"To change a scientific designation across multiple specimen, use the ",l.a.createElement("b",null,"Update Scientific Name")," feature.")),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleConfirmClose,color:"primary",autoFocus:!0},"Continue Editing"),l.a.createElement(g.a,{onClick:this.handleUpdate,color:"primary"},"Confirm Save"))),l.a.createElement(b.a,{open:this.state.unsavedOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Navigating away from Unsaved Changes!"),l.a.createElement(v.a,null,Object.keys(this.state.selectedSpecimen).map((function(e){return a.state.selectedSpecimen[e]!==a.state.editedSelectedSpecimen[e]?l.a.createElement("div",null,l.a.createElement("li",null,"From ",l.a.createElement("b",null,e),": ",a.state.selectedSpecimen[e]," ----",">"," ",l.a.createElement("b",null,e),": ",a.state.editedSelectedSpecimen[e])):""}))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleDiscard,color:"primary",autoFocus:!0},"Discard Changes"),l.a.createElement(g.a,{onClick:this.handleUnsavedClose,color:"primary"},"Continue Editing"))),l.a.createElement(b.a,{open:this.state.deleteFileOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Are you sure?"),l.a.createElement(v.a,null,"Are you sure you want to delete ",l.a.createElement(g.a,{onClick:function(e){return a.retrieveFile(c)},color:"primary"},c)),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.closeFileDelete,color:"primary",autoFocus:!0},"Cancel"),l.a.createElement(g.a,{onClick:function(e){return a.deleteFile(c)},color:"secondary"},"Delete"))),l.a.createElement(b.a,{open:this.state.deleteSpecimenOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Are you sure?"),l.a.createElement(v.a,null,"Are you sure you want to delete this specimen?"),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.closeSpecimenDelete,color:"primary",autoFocus:!0},"Cancel"),l.a.createElement(g.a,{onClick:function(e){return a.deleteSpecimen()},color:"secondary"},"Delete"))))}}]),a}(l.a.Component),te=a(296),ae=a.n(te),ne=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={alert:!1,error:"",newSpecimen:{},selectedOrganism:{},open:!1,unsavedOpen:!1,organisms:[],organismFieldList:[],confirmDialogOpen:!1,files:[]},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.isEmpty(e.state.newSpecimen)?e.handleDiscard():e.setState({unsavedOpen:!0})},e.handleUnsavedClose=function(){e.setState({unsavedOpen:!1})},e.handleDiscard=function(){e.setState({newSpecimen:{},selectedOrganism:{},unsavedOpen:!1,open:!1}),e.closeAlert()},e.closeAlert=function(){e.setState({alert:!1,error:void 0})},e.handleConfirmOpen=function(){e.setState({confirmDialogOpen:!0})},e.handleConfirmClose=function(){e.setState({confirmDialogOpen:!1})},e.handleInput=function(t,a){a&&(""===t.target.value?e.setState({newSpecimen:Object(T.a)(Object(T.a)({},e.state.newSpecimen),{},Object(c.a)({},a,null))}):e.setState({newSpecimen:Object(T.a)(Object(T.a)({},e.state.newSpecimen),{},Object(c.a)({},a,t.target.value))}))},e.handleAddNew=function(){var t=e.props.APIURL+e.props.database+"/update";fetch(t,{method:"PUT",body:JSON.stringify(e.state.newSpecimen),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),"EREQUEST"===t.code?e.setState({error:t.originalError.info.message,alert:!0}):(e.state.files&&e.handleFileUpload(t[2][0].Specimen_ID),e.props.getLastWD(e.state.newSpecimen.WD_Num),e.setState({alert:!0,error:"",newSpecimen:{},files:[]}))})).catch((function(e){alert("Something happened in fetch "+t+" : "+e)})),e.handleConfirmClose(),e.dialogContent.scrollIntoView({behavior:"smooth",block:"start"})},e.isOrganism=function(e){return"Class"===e||"Subclass"===e||"Order"===e||"Suborder"===e||"Family"===e||"Subfamily"===e||"Subgenus"===e||"Subspecies"===e||"Variety"===e||"Common_Name"===e||"Binomial_Nomenclature"===e||"Previous_Designation"===e},e.handleSelectedOrganism=function(t){e.setState({selectedOrganism:Object(T.a)({},t),newSpecimen:Object(T.a)(Object(T.a)({},e.state.newSpecimen),t)})},e.handleFileUpload=function(){var t=Object(L.a)(k.a.mark((function t(a){var n,l,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.state.files,l=new FormData,r=e.props.APIURL+"upload/"+e.props.database+"/"+a,console.log(r),i=0;i<n.length;i++)l.append("attachment",n[i]);return t.next=7,fetch(r,{method:"POST",body:l}).then((function(e){return e.json()})).then((function(e){console.log("handleFileUpload POST response: ",e)})).catch((function(e){console.error(e)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"isEmpty",value:function(e){for(var t in e)if(null!==e[t])return!1;return!0}},{key:"getOrganismList",value:function(){var e=Object(L.a)(k.a.mark((function e(t){var a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.APIURL+"organism/auto/"+t.target.value,!t.target.value){e.next=4;break}return e.next=4,fetch(a).then((function(e){return e.json()})).then((function(e){var t=Object.getOwnPropertyNames(e[0]);n.setState({organisms:e,organismFieldList:t})})).catch((function(e){alert("Something happened in fetch "+a+" : "+e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFiles",value:function(e){this.setState({files:e})}},{key:"render",value:function(){var e,t,a=this,n=this.props,r=n.database,i=n.fields,c=n.lastWD,s=n.lastNFWFL_Num,o=n.lastCrim,m=this.state,u=m.error,d=m.selectedOrganism;return u?(e=u,t="error"):(e="Success!",t="success"),l.a.createElement("div",null,l.a.createElement(g.a,{onClick:function(){return a.handleClickOpen()},color:"primary",disableElevation:!0,variant:"outlined",endIcon:l.a.createElement(ae.a,null),style:{marginBottom:"10px"}},"Add New"),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"md",open:this.state.open,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Add New Specimen - ",r," "),l.a.createElement(v.a,null,l.a.createElement("div",{ref:function(e){a.dialogContent=e}},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(v.a,null,l.a.createElement(V.a,{in:this.state.alert},l.a.createElement(H.a,{severity:t,action:l.a.createElement(G.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.closeAlert},l.a.createElement(X.a,{fontSize:"inherit"}))},e)),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Search:"),l.a.createElement(R.a,{disableClearable:!0,id:"combo-box-demo",options:this.state.organisms,getOptionLabel:function(e){if(null===e.Class&&null===e.Order&&null===e.Family&&null===e.Binomial_Nomenclature&&null===e.Common_Name)return"Unknown. Select for details.";var t="";return e.Class&&(t+=e.Class+" "),e.Subclass&&(t+=e.Subclass+" "),e.Order&&(t+=e.Order+" "),e.Suborder&&(t+=e.Suborder+" "),e.Binomial_Nomenclature&&(t+=e.Binomial_Nomenclature+" "),e.Family&&(t+=e.Family+" "),e.Subspecies&&(t+=e.Subspecies+" "),e.Common_Name&&(t+='"'+e.Common_Name+'"'),t},onChange:function(e,t){return a.handleSelectedOrganism(t)},fullWidth:!0,renderInput:function(e){return l.a.createElement(I.a,Object.assign({},e,{label:"Search by Class, Order, Family, Binomial Nomenclature",variant:"outlined",fullWidth:!0,onChange:function(e){a.getOrganismList(e)}}))}})),i.map((function(e){return"Specimen_ID"===e||"CREATED_TS"===e||"Organism_ID"===e||"MODIFIED_TS"===e?l.a.createElement("div",null):a.isOrganism(e)?l.a.createElement(I.a,{key:e,disabled:!1,id:e,label:e,defaultValue:d[e],value:a.state.newSpecimen[e]||"",fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onChange:function(t){return a.handleInput(t,e)}}):"NFWFL_Num"===e?l.a.createElement(I.a,{key:e,id:e,label:e,helperText:"NFWFL_Num"===e&&"Herpetology"===r?"Last specimen: "+s:"",fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onBlur:function(t){return a.handleInput(t,e)}}):"CRIM_Num"===e?l.a.createElement(I.a,{key:e,id:e,label:e,helperText:"CRIM_Num"===e&&"Criminalistics"===r?"Last specimen: "+o:"",fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onBlur:function(t){return a.handleInput(t,e)}}):l.a.createElement(I.a,{key:e,id:e,label:e,helperText:"WD_Num"===e&&"Xylarium"===r?"Last specimen: "+c:"",fullWidth:!0,variant:"outlined",style:{paddingBottom:"25px"},size:"small",InputLabelProps:{shrink:!0},onBlur:function(t){return a.handleInput(t,e)}})})),l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement("center",null,"Upload:")),l.a.createElement(Z.a,{onChange:this.handleFiles.bind(this)}))))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleClose,color:"primary"},"Close"),l.a.createElement(g.a,{onClick:this.handleConfirmOpen,color:"primary"},"Save"))),l.a.createElement(b.a,{open:this.state.confirmDialogOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Confirm New Specimen"),l.a.createElement(v.a,null,l.a.createElement(B.a,{id:"alert-dialog-description"},Object.keys(this.state.newSpecimen).map((function(e){return"MODIFIED_BY"===e||"MODIFIED_TS"===e||"CREATED_BY"===e||"CREATED_TS"===e||"Organism_ID"===e||null===a.state.newSpecimen[e]?"":l.a.createElement("div",{key:e},l.a.createElement("li",{key:e},l.a.createElement("b",null,e),": ",a.state.newSpecimen[e]))})))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleConfirmClose,color:"primary",autoFocus:!0},"Resume Editing"),l.a.createElement(g.a,{onClick:this.handleAddNew,color:"primary"},"Confirm"))),l.a.createElement(b.a,{open:this.state.unsavedOpen,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(C.a,{id:"alert-dialog-title"},"Navigating away from new specimen input!"),l.a.createElement(v.a,null,"You are navigating away without saving these changes!",Object.keys(this.state.newSpecimen).map((function(e){return"MODIFIED_BY"===e||"MODIFIED_TS"===e||"CREATED_BY"===e||"CREATED_TS"===e||"Organism_ID"===e?"":l.a.createElement("div",{key:e},l.a.createElement("li",{key:e},l.a.createElement("b",null,e),": ",a.state.newSpecimen[e]))}))),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleDiscard,color:"primary",autoFocus:!0},"Discard Changes"),l.a.createElement(g.a,{onClick:this.handleUnsavedClose,color:"primary"},"Continue Entry"))))}}]),a}(n.Component),le=a(304),re=a.n(le),ie=a(297),ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={disableSave:!1,bulkOpen:!1,alert:!1,error:"",errorObj:{},loading:!1,bulkSpecimen:[],csvXyFields:["Binomial_Nomenclature","WD_Num","Collection_Num","Other_Nums","Previous_Collection","Collector","Source_Type","Wild_Cultivated","Specimen_Description","Heartwood_Sapwood","Notes","Color","NFWFL_Analyzed","Catalogued_By","Continent","Country","State","Locality","Lat_Long","Family","Previous_Designation","Common_Name","Sample_Location","Subspecies"],csvCrimFields:["Binomial_Nomenclature","CRIM_Num","Collection_Num","Other_Names","Previous_Collection","Collector","Source_Type","Wild_Cultivated","Specimen_Description","Notes","Color","NFWFL_Analyzed","Catalogued_By","Continent","Country","State","Locality","Lat_Long","Family","Previous_Designation","Common_Name","Sample_Location","Subspecies"],csvHerpFields:["Binomial_Nomenclature","Class","Subclass","Order","Suborder","Family","Subfamily","Subgenus","Subspecies","Variety","Common_Name","Previous_Designation","Specimen_Sex","Specimen_Age","NFWFL_Num","REP_Num","Deaccessioned_To","Deaccessioned_Reason","Material","Prep_By","Specimen_Owner","Accession_Num","ESA","CITES","Document_Reference","Locality_Desc","Location_Desc"]},e.handleChange=function(t,a){return e.setState(Object(c.a)({},t,a))},e.handleBulkOpen=function(){e.setState({bulkOpen:!0})},e.handleBulkClose=function(){e.handleChange("bulkOpen",!1),e.handleChange("bulkSpecimen",[]),e.closeAlert()},e.handleCSVParse=function(t){e.setState({bulkSpecimen:t})},e.disableAndSave=function(){e.handleChange("loading",!0),e.handleBulkSave()},e.handleBulkSave=function(){var t=e.state.bulkSpecimen,a=e.props.APIURL+e.props.database+"/update";fetch(a,{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"EREQUEST"===t.code?e.setState({error:t.originalError.info.message,alert:!0,loading:!1}):e.setState({alert:!0,error:"",loading:!1})})).catch((function(e){alert("Something happened in fetch "+a+" : "+e)}))},e.closeAlert=function(){e.setState({alert:!1,error:void 0})},e}return Object(o.a)(a,[{key:"isEmpty",value:function(e){for(var t in e)if(null!==e[t])return!1;return!0}},{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.error,i=n.bulkSpecimen,c=n.loading,s=this.props.database;if(r?(e=r,t="error"):(e="Success!",t="success"),i.length>500)var o=i.slice(0,499);return l.a.createElement("div",null,l.a.createElement(g.a,{color:"primary",disableElevation:!0,variant:"outlined",endIcon:l.a.createElement(re.a,null),onClick:function(e){return a.handleBulkOpen()},style:{marginBottom:"10px"}},"Bulk Add"),l.a.createElement(b.a,{fullWidth:!0,maxWidth:"md",open:this.state.bulkOpen,"aria-labelledby":"form-dialog-title"},l.a.createElement(C.a,{id:"form-dialog-title"},"Bulk Upload - ",s," "),l.a.createElement(v.a,null,l.a.createElement(V.a,{in:this.state.alert},l.a.createElement(H.a,{severity:t,action:l.a.createElement(G.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.closeAlert},l.a.createElement(X.a,{fontSize:"inherit"}))},e)),"Please use this template for ",s," specimen:"," ","Herpetology"===s?l.a.createElement("a",{href:"./Herpetology_Template.csv",download:"./Herpetology_Template.csv"},"Herpetology Template"):"Xylarium"===s?l.a.createElement("a",{href:"./Xylarium_Template.csv",download:"./Xylarium_Template.csv"},"Xylarium Template"):l.a.createElement("a",{href:"./Criminalistics_Template.csv",download:"./Criminalistics_Template.csv"},"Criminalistics Template"),l.a.createElement("br",null),"Xylarium"===s?"Latest Specimen: "+this.state.lastWD:""," ",l.a.createElement("br",null),"Page may become unresponsive when loading large CSVs. If it does, select 'Wait' and give it up to 5 minutes.",l.a.createElement("br",null),l.a.createElement(ie.a,{keys:"Herpetology"===s?this.state.csvHerpFields:"Xylarium"===s?this.state.csvXyFields:this.state.csvCrimFields,onDataUploaded:this.handleCSVParse,render:function(e){return l.a.createElement("input",{type:"file",onChange:e})}}),l.a.createElement("br",null),l.a.createElement(B.a,null,"Please review your additions below and click 'Save' to confirm:"," "),l.a.createElement(M.JsonToTable,{json:o||i})),l.a.createElement(S.a,null,l.a.createElement(g.a,{onClick:this.handleBulkClose,disabled:c,color:"primary"},"Close"),l.a.createElement(g.a,{variant:"contained",color:"primary",disabled:c,onClick:this.disableAndSave},"Save",c&&l.a.createElement(A.a,{size:24})))))}}]),a}(n.Component),se=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){return n.setState(Object(c.a)({},e,t))},n.setAppDB=function(e){n.setState({database:e,data:[]})},n.setAppFields=function(e){n.setState({fields:e})},n.getLastWD=function(e){n.setState({lastWD:e})},n.getLastNFWFL_Num=function(e){n.setState({lastNFWFL:e})},n.getLastCrim=function(e){n.setState({lastCrim:e})},n.setOrganismFields=function(e){n.setState({organismFieldList:e})},n.handleSearch=function(e,t){var a=n.state.database;n.handleChange("loading",!0);var l=n.state.APIURL,r=" ";r=""===t?l+a:l+a+"/search/"+e+"/"+t,fetch(r).then((function(e){return e.json()})).then((function(l){n.handleChange("data","Herpetology"===a?l[0]:l.recordsets[0]),n.handleChange("searchTerm",t),n.handleChange("field",e),n.handleChange("loading",!1)})),"Xylarium"===a?fetch(l+a+"/lastWD").then((function(e){return e.json()})).then((function(e){void 0===e.recordsets[0][0]?n.getLastWD("No Previous Specimen - No Xylarium records exist or DB not connected."):n.state.lastWD!==e.recordsets[0][0].WD_Num&&n.handleChange("lastWD",e.recordsets[0][0].WD_Num)})).catch((function(e){alert("ERROR - xy",e)})):"Herpetology"===a?fetch(l+a+"/lastNFWFL_Num").then((function(e){return e.json()})).then((function(e){void 0===e[0][0]?n.getLastNFWFL_Num("No Previous Specimen - No Herpetology records exist or DB not connected."):n.state.lastNFWFL!==e[0][0].NFWFL_Num&&n.handleChange("lastNFWFL",e[0][0].NFWFL_Num)})).catch((function(e){console.log(e),alert("ERROR - herp",e)})):"Criminalistics"===a&&fetch(l+a+"/lastCrim").then((function(e){return e.json()})).then((function(e){void 0===e.recordsets[0][0]?n.getLastCrim("No Previous Specimen - No Criminalistics records exist or DB not connected."):n.state.lastNFWFL!==e.recordsets[0][0].CRIM_Num&&n.handleChange("lastCrim",e.recordsets[0][0].CRIM_Num)})).catch((function(e){alert("ERROR crim- ",e)}))},n.state={loading:!1,database:"Herpetology",organismFieldList:[],APIURL:"http://192.168.1.18:9000/",data:[],fields:[],lastWD:"",searchTerm:"",field:"",lastNFWFL:"",lastCrim:""},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.APIURL,a=e.data,n=e.fields,r=e.database,i=e.lastWD,c=e.searchTerm,s=e.field,o=e.organismFieldList,m=e.loading,u=e.lastNFWFL,d=e.lastCrim;return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"header"},l.a.createElement(D,{database:r})),l.a.createElement("div",{className:"buttons",align:"right"},l.a.createElement("div",{className:"Add"},l.a.createElement(ne,{database:r,fields:n.map((function(e){return e.COLUMN_NAME})),lastWD:i,lastNFWFL_Num:u,lastCrim:d,getLastCrim:this.getLastCrim,getLastNFWFL_Num:this.getLastNFWFL_Num,getLastWD:this.getLastWD,APIURL:t})),l.a.createElement("div",{className:"BulkAdd"},l.a.createElement(ce,{database:r,APIURL:t})),l.a.createElement("div",{className:"UpdateSciName"},l.a.createElement(Y,{database:r,APIURL:t})),l.a.createElement("div",{className:"TaxonomicSynonyms"},l.a.createElement(J,{database:r,APIURL:t,organismFieldList:o}))),l.a.createElement("div",{className:"search"},l.a.createElement(x,{setAppDB:this.setAppDB,setAppFields:this.setAppFields,getLastWD:this.getLastWD,getLastNFWFL_Num:this.getLastNFWFL_Num,getLastCrim:this.getLastCrim,setOrganismFields:this.setOrganismFields,handleSearch:this.handleSearch,loading:m,APIURL:t})),l.a.createElement("div",{className:"results"},l.a.createElement(ee,{data:a,fields:n.map((function(e){return e.COLUMN_NAME})),database:r,handleSearch:this.handleSearch,APIURL:t,field:s,searchTerm:c})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[315,1,2]]]);
//# sourceMappingURL=main.24e714c7.chunk.js.map